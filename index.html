<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RROLL</title>
<style>
/* RESET */
*{margin:0;padding:0;box-sizing:border-box;}

body{
  min-height:100vh;
  background:black;
  color:#e6e6e6;
  font-family:'Arial',sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  position:relative;
}

body::before{
  content:'';
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:0.08;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.4"/></svg>');
  mix-blend-mode: overlay;
}

canvas#bgCanvas{
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  z-index:0;
}

.container{
  position:relative;
  z-index:1;
  text-align:center;
  max-width:600px;
}

h1,h2,p{margin-bottom:1rem;}
input{
  padding:0.6rem;
  margin:0.5rem 0;
  font-size:1rem;
  background:#111;
  color:#00ff99;
  border:1px solid #00ff99;
  width:80%;
}

button{
  background:transparent;
  border:1px solid #00ff99;
  color:#00ff99;
  padding:0.8rem 2rem;
  margin:0.5rem;
  cursor:pointer;
  font-size:1rem;
  transition:0.3s;
}

button:hover{
  background:#00ff99;
  color:black;
  box-shadow:0 0 12px #00ff99,0 0 24px #00ff99;
}

#authContainer, #mainContent{
  position:relative;
  z-index:1;
}

.subtext{
  font-size:0.9rem;
  opacity:0.6;
  margin-bottom:3rem;
}
</style>

<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<!-- AUTH FORM -->
<div id="authContainer" class="container">
  <h2 style="color:#00ff99;">Sign Up / Login</h2>
  
  <input type="email" id="signupEmail" placeholder="Email">
  <input type="password" id="signupPass" placeholder="Password">
  <button id="signupBtn">Sign Up</button>
  
  <hr style="margin:1rem 0; border-color:#00ff99;">
  
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginPass" placeholder="Password">
  <button id="loginBtn">Login</button>
</div>

<!-- MAIN SITE CONTENT -->
<div id="mainContent" class="container" style="display:none;">
  <h1>RROLL</h1>
  <p>Access is not accidental.</p>
  <p class="subtext">This page is not indexed.<br>Distribution is intentional.</p>
  <button class="btn">Explore</button>
</div>

<script>
// ---------------- FIREBASE ----------------
const firebaseConfig = {
  apiKey: "AIzaSyDFk2cA98terok0Ly0Wkczevb8-5PYUZy4",
  authDomain: "rrollcard.firebaseapp.com",
  projectId: "rrollcard",
  storageBucket: "rrollcard.firebasestorage.app",
  messagingSenderId: "571030673010",
  appId: "1:571030673010:web:ac251b013ae124f7eb94eb",
  measurementId: "G-P7L80J9SCN"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ---------------- FLOATING DOTS ----------------
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const numDots = 80;
const dots = [];
class Dot{
  constructor(){ 
    this.x=Math.random()*canvas.width;
    this.y=Math.random()*canvas.height;
    this.radius=Math.random()*2+1;
    this.vx=(Math.random()-0.5)*0.5;
    this.vy=(Math.random()-0.5)*0.5;
  }
  draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,Math.PI*2); ctx.fillStyle='rgba(0,255,153,0.8)'; ctx.fill(); }
  update(){ this.x+=this.vx; this.y+=this.vy; if(this.x<0||this.x>canvas.width)this.vx*=-1; if(this.y<0||this.y>canvas.height)this.vy*=-1; this.draw(); }
}
for(let i=0;i<numDots;i++){ dots.push(new Dot()); }
function animate(){ ctx.clearRect(0,0,canvas.width,canvas.height); dots.forEach(dot=>dot.update()); requestAnimationFrame(animate); }
animate();
window.addEventListener('resize',()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});

// ---------------- SIGNUP ----------------
document.getElementById('signupBtn').onclick = async () => {
  const email = document.getElementById('signupEmail').value;
  const pass = document.getElementById('signupPass').value;
  if(!email||!pass){ alert('Fill in both fields'); return; }
  try {
    const userCred = await auth.createUserWithEmailAndPassword(email, pass);
    await db.collection('users').doc(userCred.user.uid).set({
      email: email,
      role: 'user',
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
    alert('Signup successful! You can now log in.');
    document.getElementById('signupEmail').value='';
    document.getElementById('signupPass').value='';
  } catch(e){ alert('Error: '+e.message); }
};

// ---------------- LOGIN ----------------
document.getElementById('loginBtn').onclick = async () => {
  const email = document.getElementById('loginEmail').value;
  const pass = document.getElementById('loginPass').value;
  if(!email||!pass){ alert('Fill in both fields'); return; }
  try {
    const userCred = await auth.signInWithEmailAndPassword(email, pass);
    document.getElementById('authContainer').style.display='none';
    document.getElementById('mainContent').style.display='block';
  } catch(e){ alert('Login failed: '+e.message); }
};

// ---------------- AUTH STATE ----------------
auth.onAuthStateChanged(user=>{
  if(user){
    document.getElementById('authContainer').style.display='none';
    document.getElementById('mainContent').style.display='block';
  } else {
    document.getElementById('authContainer').style.display='block';
    document.getElementById('mainContent').style.display='none';
  }
});
</script>
</body>
</html>